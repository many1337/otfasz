function Menu(e,n,r,o){Render.GradientRect(e,n,r-90,o+4,1,[52,100,235,255],[52,100,235,0]),Render.FilledRect(e,n+2,r,o,[0,0,0,255]),Render.GradientRect(e-6,n,6,o+4,1,[52,100,235,0],[52,100,235,255])}const Clicked_Event=function(e,n,r,o,l){return e[0]>n&&e[1]>r&&e[0]<o&&e[1]<l},getvalue=function(e){return UI.GetValue("Script items",e)};function setvalue(e,n){UI.SetValue("MISC","JAVASCRIPT","Script items",e,n)}function addcheckbox(e){UI.AddCheckbox(e)}var Checkboxbool=[],CheckboxParams=[],CheckboxXParams=[],CheckboxLocX=[],CheckboxlocY=[],CheckboxLabels=[],CheckboxRow=[],CheckboxAmmount=0,Draw_Callbacks=[],CreateMove_Callbacks=[],MenuElementSize=0,MenuElementType=[],MenuElementID=[];function Callback(e,n){0==e?Draw_Callbacks.push(n):1==e&&CreateMove_Callbacks.push(n)}var HasLoaded=!1,LoadTimer=0;function DrawCallback(){for(var e=0;e<Draw_Callbacks.length;e++)Draw_Callbacks[e]()}function CreateMoveCallback(){for(var e=0;e<CreateMove_Callbacks.length;e++)CreateMove_Callbacks[e]()}function GetMenuValue(e){return UI.GetValue("Script items",e)}function SetMenuValue(e,n){UI.SetValue("Script items",e,n),UpdateCheckboxState(e,n)}function CreateCheckbox(e,n,r){Checkboxbool.push(n),n?CheckboxXParams.push(21):CheckboxXParams.push(3),CheckboxLabels.push(e),CheckboxRow.push(r),UI.AddCheckbox(e),setvalue(e,n),UI.SetEnabled("Script items",e,!1),MenuElementSize++,MenuElementType.push(1),MenuElementID.push(Checkboxbool.length-1)}Global.RegisterCallback("Draw","DrawCallback"),Global.RegisterCallback("CreateMove","CreateMoveCallback");var LabelLabel=[],LabelRow=[];function CreateLabel(e,n){LabelLabel.push(e),MenuElementSize++,MenuElementType.push(0),MenuElementID.push(LabelLabel.length-1),LabelRow.push(n)}function DrawLabel(e,n,r){var o=Render.AddFont("Segoe UI Regular",13,600);Render.StringCustom(e,n-8,0,r,[255,255,255,255],o)}var SliderLabels=[],SliderMin=[],SliderMax=[],SliderValue=[],SliderXx=[],SliderRows=[],SliderStoredX=[],SliderIsStored=[],SliderIsHold=[],SliderFixed=[],SliderOldVal=[];function Difference(e,n){return n<e?e-n:n-e}function CreateSlider(e,n,r,o,l){UI.AddSliderInt(e,n,r),UI.SetEnabled(e,!1),SliderLabels.push(e),SliderMin.push(n),SliderMax.push(r),SliderValue.push(o),MenuElementID.push(SliderLabels.length-1),MenuElementSize++,MenuElementType.push(2),SliderXx.push(0),SliderRows.push(l),SliderStoredX.push(0),SliderIsStored.push(!1),SliderIsHold.push(!1),SliderFixed.push(!1),SliderOldVal.push(!1)}function Clamp(e,n,r){return e<n?n:r<e?r:val}function Tr(e,n,r,o,l,t,a){var i=t/90*r,t=t/90*o,l=l/180*r;Render.Polygon([[e,n+o-t],[e+r/2+i+l,n],[e+r-i,n+o]],a)}var DropDownValue=[-1],DropDownOpened=[!1],DropDownYM=[0],DropDownLabel=[],DropDownContents=[["test1","test2","test3"]],DropDownHasClicked=[!1];function DrawDropDown(e,n,r,o){var l=Render.AddFont("Segoe UI Regular",13,600),t=Render.AddFont("arr",13,600);Render.StringCustom(e,n-7,0,r,[255,255,255,255],l);var a=Render.TextSizeCustom(r,l);if(e+=110,-1==DropDownValue[o]?Render.StringCustom(e+150,n-7,0,"Select",[255,255,255,255],l):Render.StringCustom(e+150,n-7,0,DropDownContents[o][DropDownValue[o]],[255,255,255,255],l),Render.StringCustom(e+180+a[0],n-7,0,">",[255,255,255,255],t),UI.IsMenuOpen()&&Input.IsKeyPressed(1)){const mouse_pos=Global.GetCursorPosition();Clicked_Event(mouse_pos,e+120,n-7,e+180+a[0]+40,n+8)&&!DropDownHasClicked[o]&&(DropDownOpened[o]=!DropDownOpened[o],DropDownHasClicked[o]=!0)}else DropDownHasClicked[o]=!1;if(DropDownOpened[o]){Render.FilledRect(e+130,n-12,80+a[0],23+25*DropDownContents.length+7,[0,0,0,255]),Render.StringCustom(e+150,n-7,0,"Select",[255,255,255,255],l),Render.StringCustom(e+180+a[0],n-7,0,"|",[255,255,255,255],t),DropDownYM[o]<255&&(DropDownYM[o]+=10.2,255<DropDownYM[o]&&(DropDownYM[o]=255));for(var i=0;i<DropDownContents[o].length;i++)Clicked_Event(mouse_pos,e+120,n-7+25*(i+1),e+180+a[0]+40,n-7+25*(i+1)+6)&&255==DropDownYM[o]&&DropDownHasClicked[o],Render.StringCustom(e+150,n-7+25*(i+1),0,DropDownContents[o][i],[255,255,255,DropDownYM[o]],l)}else DropDownYM[o]=0}function DrawSlider(e,n,r,o){var l=Render.AddFont("Segoe UI Regular",13,600),t=GetMenuValue(r).toString();Render.StringCustom(e,n-7,0,r,[255,255,255,255],l),Render.StringCustom(e+20+200+13,n-8,0,t,[255,255,255,255],l);var a=Render.TextSizeCustom(r,l);Render.FilledRect(e+20+a[0],n-2,200-a[0],8,[20,35,48,255]);t=(200-a[0])/Difference(SliderMin[o],SliderMax[o]),l=e+20+a[0]+SliderXx[o]*t-3;Render.FilledCircle(l,n+1,8,[52,100,235,255]),UI.IsMenuOpen()&&Input.IsKeyPressed(1)?(l=Global.GetCursorPosition(),Clicked_Event(l,e+20+a[0]+SliderXx[o]*t-17-t,n-6,e+20+a[0]+SliderXx[o]*t+13+t,n+8)?(SliderStoredX[o]!=l[0]&&(SliderXx[o]=((l[0]-e-60)/t).toFixed(),SliderIsStored[o]=!1),SliderXx[o]!=Difference(SliderMin[o],SliderMax[o])?SliderFixed[o]=!0:SliderFixed[o]=!1,SetMovableMenu(!1),SliderIsHold[o]=!0):SliderIsStored[o]=!1):Input.IsKeyPressed(1)||SetMovableMenu(!0),SliderFixed[o]&&(SliderXx[o]>Difference(SliderMin[o],SliderMax[o])&&(SliderXx[o]=Difference(SliderMin[o],SliderMax[o])),SliderFixed[o]=!1),SliderXx[o]<0&&(SliderXx[o]=0),HasLoaded&&(SliderMin[o]<0?setvalue(r,-(-SliderMin[o]-SliderXx[o])):setvalue(r,SliderMin[o]+SliderXx[o]))}function FixSliderOffset(e){for(var n=0;n<SliderLabels.length;n++)SliderStoredX[n]+=e}function AddNegNumLeft(e,n){return e<0?-(-e-n):e+n}function LoadFromConfig(){UpdateAllCheckbox(),UpdateAllSlider()}function CheckboxCallback(e,n){for(var r=0;r<MenuElementSize;r++)0==MenuElementType[r]?DrawLabel(e+20+260*LabelRow[MenuElementID[r]],n+20+33*r,LabelLabel[MenuElementID[r]]):1==MenuElementType[r]?UpdateCheckbox(e+20+260*CheckboxRow[MenuElementID[r]],n+20+33*r,CheckboxLabels[MenuElementID[r]],MenuElementID[r]):2==MenuElementType[r]&&DrawSlider(e+20+260*SliderRows[MenuElementID[r]],n+20+33*r,SliderLabels[MenuElementID[r]],MenuElementID[r])}function UpdateAllCheckbox(){for(var e=0;e<CheckboxLabels.length;e++)Checkboxbool[e]=GetMenuValue(CheckboxLabels[e])}function UpdateAllSlider(){for(var e=0;e<SliderLabels.length;e++)SliderXx[e]=GetMenuValue(SliderLabels[e])}function UpdateCheckboxState(e,n){for(var r=0;r<CheckboxLabels.length;r++)CheckboxLabels[r]==e&&(Checkboxbool[r]=n)}function UpdateCheckbox(e,n,r,o){var l=Render.AddFont("Segoe UI Regular",13,600);Render.StringCustom(e,n-8,0,r,[255,255,255,255],l),e+=190,Render.FilledCircle(e,n,8,[20,35,48,255]),Render.FilledCircle(e+6,n,8,[20,35,48,255]),Render.FilledCircle(e+12,n,8,[20,35,48,255]),Render.FilledCircle(e+18,n,8,[20,35,48,255]),Render.FilledCircle(e+24,n,8,[20,35,48,255]),Checkboxbool[o]?Render.FilledCircle(e+CheckboxXParams[o],n,10,[52,100,235,255]):Render.FilledCircle(e+CheckboxXParams[o],n,10,[66,77,87,255]),CheckboxXParams[o]<17&&Checkboxbool[o]?CheckboxXParams[o]+=3:CheckboxXParams[o]<21&&Checkboxbool[o]?CheckboxXParams[o]++:7<CheckboxXParams[o]&&!Checkboxbool[o]?CheckboxXParams[o]-=3:3<CheckboxXParams[o]&&!Checkboxbool[o]&&CheckboxXParams[o]--,UI.IsMenuOpen()&&Input.IsKeyPressed(1)?(l=Global.GetCursorPosition(),Clicked_Event(l,e-8,n-8,e+24+8,n+8)&&!CheckboxParams[o]&&(Checkboxbool[o]=!Checkboxbool[o],setvalue(r,Checkboxbool[o]),CheckboxParams[o]=!0)):!Input.IsKeyPressed(1)&&CheckboxParams[o]&&(CheckboxParams[o]=!1)}var stored=!1,x_offs=0,y_offs=0,X=0,Y=0,MenuSize=287,MenuSize2=140;const in_bounds=function(e,n,r,o,l){return e[0]>n&&e[1]>r&&e[0]<o&&e[1]<l};function GetMenuSize(){return[MenuSize,MenuSize2]}function GetMenuLocation(){return[X,Y]}function SetMenuSize(e,n){MenuSize=e,MenuSize2=n}function SetMenuLocation(e,n){X=e,Y=n}var Movable=!0;_MouseDown=!1;var Events={MouseDown:0,MouseUp:1};function GetEvent(e){return 0==e?_MouseDown:1!=e&&void 0}function SetMovableMenu(e){Movable=e}function GetMovableMenu(){return Movable}var pi=3.141592653589793,Loadtime=20;function distance2radius(e){return e*(pi/180)}function D3DX3CF(e,n,r,o,l,t,a,i,d){var u,s;for(l=-1<(l=l<361&&l||360)&&l||0,rot=t+=1;rot<l+t+1;rot+=30*t){rot_r=distance2radius(rot),line_x=o*Math.cos(rot_r)+e,line_y=o*Math.sin(rot_r)+n;var c=Render.WorldToScreen([line_x,line_y,r]),S=(Render.WorldToScreen([e,n,r]),Render.WorldToScreen([e,n,r]));null!=S[0]&&null!=c[0]&&null!=u&&i&&Render.Polygon([[c[0],c[1]],[u,s],[S[0],S[1]]],d),u=c[0],s=c[1]}}var Draw={Screen:{Circle:function(e,n,r,o){Render.Circle(e,n,r,o)},Rectangle:function(e,n,r,o,l,t){for(var a=0;a<l;a++)Render.Line(e+a,n+a,e+a,n+o+a,t),Render.Line(e+a,n+a,e+r+a,n+a,t),Render.Line(e+r+a,n,e+r+a,n+o+a,t),Render.Line(e+a,n+o+a,e+r+a,n+o+a,t)},TriangleFilled:function(e,n,r,o,l,t,a){var i=t/90*r,t=t/90*o,l=l/180*r;Render.Polygon([[e,n+o-t],[e+r/2+i+l,n],[e+r-i,n+o]],a)},RectangleFilled:function(e,n,r,o,l){Render.FilledRect(x,n,r,o,l)},CircleFilled:function(e,n,r,o){Render.FilledCircle(x,n,r,o)},Arc:function(e,n,r,o,l,t,a){for(var i=2*Math.PI/300,d=r-t,u=(o+l)*(Math.PI/180),o=o*Math.PI/180;d<r;--r)for(var s=o;s<u;s+=i){var c=Math.round(e+r*Math.cos(s)),S=Math.round(n+r*Math.sin(s)),b=Math.round(e+r*Math.cos(s+i)),C=Math.round(n+r*Math.sin(s+i));Render.Line(c,S,b,C,a)}}},World:{CircleFilled3D:function(e,n,r,o,l){D3DX3CF(e,n,r,o,360,0,l,!0,l)},Rectangle3D:function(e,n,r,o,l,t){var a=o/2,i=l/2,d=Render.WorldToScreen([e-a,n-i,r]),o=Render.WorldToScreen([e+a,n-i,r]),l=Render.WorldToScreen([e-a,n+i,r]),r=Render.WorldToScreen([e+a,n+i,r]);Render.Line(d[0],d[1],o[0],o[1],t),Render.Line(o[0],o[1],r[0],r[1],t),Render.Line(l[0],l[1],r[0],r[1],t),Render.Line(d[0],d[1],l[0],l[1],t)}}},StoredX=0,StoredX_T=!1;function DrawAPI(){var e;UI.IsMenuOpen()&&(Menu(X,Y,MenuSize,MenuSize2),CheckboxCallback(X,Y),Input.IsKeyPressed(1)?(e=Global.GetCursorPosition(),in_bounds(e,X,Y,X+MenuSize,Y+MenuSize2)&&Movable&&(StoredX_T||(StoredX=X,StoredX_T=!0),_MouseDown=!0,stored||(x_offs=e[0]-X,y_offs=e[1]-Y,stored=!0),X=e[0]-x_offs,Y=e[1]-y_offs)):stored?(_MouseDown=stored=!1,StoredX_T=!1,FixSliderOffset(X-StoredX)):_MouseDown=!1,HasLoaded||LoadTimer++,Loadtime<LoadTimer&&(HasLoaded=!0))}Callback(0,DrawAPI);
